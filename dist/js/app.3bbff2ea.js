(function(e){function t(t){for(var n,i,l=t[0],a=t[1],r=t[2],h=0,d=[];h<l.length;h++)i=l[h],c[i]&&d.push(c[i][0]),c[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,r||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,l=1;l<o.length;l++){var a=o[l];0!==c[a]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},c={1:0},s=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/wapp/5c7d3145cb652f5fc9380c4f/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var r=0;r<l.length;r++)t(l[r]);var u=a;s.push([9,0]),o()})({"+4JH":function(e,t,o){"use strict";var n=o("eMAj"),c=o.n(n);t["default"]=c.a},"2jSW":function(e,t,o){"use strict";var n=o("L8gG"),c=o.n(n);t["default"]=c.a},"49Fx":function(e,t,o){"use strict";var n=o("nMzj"),c=o.n(n);t["default"]=c.a},9:function(e,t,o){e.exports=o("Vtdi")},ExAY:function(e,t,o){e.exports={choice:"Choice_choice_194-O","not-button":"Choice_not-button_31883","choice-circle":"Choice_choice-circle_1NqnL","choice-circle-selected":"Choice_choice-circle-selected_2-l0n","choice-circle-voted":"Choice_choice-circle-voted_P8E_3","choice-circle-selectable":"Choice_choice-circle-selectable_2nPLO","choice-not-stat":"Choice_choice-not-stat_335CM","choice-caption":"Choice_choice-caption_3swhA","choice-vote-count":"Choice_choice-vote-count_BKGKM","choice-percentage":"Choice_choice-percentage_1SW5a"}},L0Xj:function(e,t,o){},L8gG:function(e,t,o){e.exports={"vote-container":"Vote_vote-container_QpkSO","vote-choices":"Vote_vote-choices_3Ml6u","vote-question":"Vote_vote-question_2XCQC",bottom:"Vote_bottom_3m-Dt"}},QtCJ:function(e,t,o){},UbLb:function(e,t,o){},Vtdi:function(e,t,o){"use strict";o.r(t);var n=o("Kw5r"),c=(o("pxaK"),o("QtCJ"),o("UbLb"),o("L0Xj"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.$style.root},[o("Header"),o("Vote",{attrs:{question:e.question,choices:e.choices,votes:e.votes,selectedVote:e.vote,selectedChoice:e.selectedChoice,showStatBeforeVoting:e.showStatBeforeVoting}}),o("transition",{attrs:{name:"move-vote-button"}},[null===e.vote&&null!==e.selectedChoice?o("Button",{attrs:{label:"Vote"},on:{click:function(t){e.makeVote(e.selectedChoice)}}}):e._e()],1),e.customizeMode?o("div",{class:e.$style.customize}):e._e()],1)}),s=[],i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.$style.header},[o("span",{class:e.$style["header-title"]},[e._v("Votelite")]),o("i",{staticClass:"noselect"},[e._v("\n    "+e._s("poll")+"\n  ")])])},l=[],a={name:"Header"},r=a,u=o("sPab"),h=o("KHd+");function d(e){this["$style"]=u["default"].locals||u["default"]}var f=Object(h["a"])(r,i,l,!1,d,null,null),v=f.exports,p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.$style["vote-container"],style:{height:e.currentHeight+"px"}},[o("div",{class:e.$style["vote-question"]},[e._v(e._s(e.question))]),o("div",{class:e.$style["vote-choices"]},e._l(e.choices,function(t,n){return o("Choice",{key:n,attrs:{caption:t,percentage:e.votesPercentage[n],voteCount:e.votesCount[n],"selected-vote":e.selectedVote,showStatBeforeVoting:e.showStatBeforeVoting,index:n}})})),o("div",{class:e.$style["bottom"]})])},_=[],m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:[e.$style["choice"],null!==e.selectedVote?e.$style["not-button"]:null],on:{click:e.select}},[o("transition",{attrs:{name:"fade-percentage"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showStatBeforeVoting||!e.showStatBeforeVoting&&null!==e.selectedVote,expression:"showStatBeforeVoting || (!showStatBeforeVoting && selectedVote !== null)"}],class:e.$style["choice-percentage"]},[e._v("\n      "+e._s(e.percentage)+"\n    ")])]),o("div",{class:e.$style["choice-not-stat"]},[o("div",{class:[e.$style["choice-circle"],"selected"==e.state?e.$style["choice-circle-selected"]:null,e.selectedVote==e.index?e.$style["choice-circle-voted"]:null,e.canSelect&&"selected"!=e.state?e.$style["choice-circle-selectable"]:null]},[o("transition",{attrs:{name:"fade-check"}},[o("p",{directives:[{name:"show",rawName:"v-show",value:e.selectedVote===e.index,expression:"selectedVote === index"}],class:e.$style["check-mark"]},[o("i",[e._v(" check ")])])]),e.selectedVote!==e.index?o("div",[o("transition",{attrs:{name:e.selectedVote===e.index?"fade-question-disabled":"fade-question"}},[o("p",{directives:[{name:"show",rawName:"v-show",value:"selected"===e.state&&null===e.selectedVote,expression:"state === 'selected' && selectedVote === null"}],class:e.$style["question-mark"],staticStyle:{color:"white"}},[e._v("\n            ?\n          ")])])],1):e._e()],1),o("div",{class:e.$style["choice-caption"]},[e._v("\n      "+e._s(e.shortenedCaption)+"\n    ")])]),o("transition",{attrs:{name:"fade-vote-count"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showStatBeforeVoting||!e.showStatBeforeVoting&&null!==e.selectedVote,expression:"showStatBeforeVoting || (!showStatBeforeVoting && selectedVote !== null)"}],class:e.$style["choice-vote-count"]},[o("div",[e._v(" "+e._s(e.voteCount)+" ")]),o("div",[o("i",[e._v(" person ")])])])])],1)},b=[],g={name:"Choice",props:["caption","percentage","vote-count","index","selectedVote","showStatBeforeVoting"],data:function(){return{state:"not selected"}},methods:{select:function(){"not selected"==this.state&&this.canSelect?(this.state="selected",ie.$emit("choiceSelected",this.index)):"selected"==this.state&&(this.state="not selected",ie.$emit("choiceSelected",null))}},computed:{canSelect:function(){return null===this.selectedVote},shortenedCaption:function(){return this.caption.slice(0,45)}},created:function(){var e=this;this.selectedVote===this.index?this.state="voted":this.state="not selected",ie.$on("choiceSelected",function(t){t!=e.index&&(e.state="not selected")})}},w=g,V=o("iJW9");function y(e){this["$style"]=V["default"].locals||V["default"]}var x=Object(h["a"])(w,m,b,!1,y,null,null),C=x.exports,$=window,S=$.R,j={name:"Vote",components:{Choice:C},props:["question","choices","votes","selectedVote","selectedChoice","showStatBeforeVoting"],data:function(){return{}},computed:{votesPercentage:function(){var e=S.sum(this.votes),t=[];if(0===e)for(var o=0;o<this.choices.length;o++)t.push(0);else t=this.votes.map(function(t){return Math.round(t/e*100)});return t},votesCount:function(){var e=[];if(0===S.sum(this.votes)||this.choices.length!=this.votes.length)for(var t=0;t<this.choices.length;t++)e.push(0);else e=this.votes;return e},currentHeight:function(){return null!==this.selectedChoice&&null===this.selectedVote?228:280}}},B=j,q=o("2jSW");function k(e){this["$style"]=q["default"].locals||q["default"]}var O=Object(h["a"])(B,p,_,!1,k,null,null),M=O.exports,z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.$style["button-container"],on:{click:function(t){e.$emit("click")}}},[e._v("\n  "+e._s(e.label)+"\n")])},P=[],H={name:"Button",props:["label"]},L=H,J=o("+4JH");function W(e){this["$style"]=J["default"].locals||J["default"]}var A=Object(h["a"])(L,z,P,!1,W,null,null),E=A.exports,K=(o("FLlr"),window),G=K.W,N=K.R,R=function(e,t){return G.share.dispatch([],e,t)},F=function(e,t){return R(["__adjust",[["__add",[1]],e]],N.repeat(0,t))},Q=o("J4zp"),X=o.n(Q),T=(o("VRzm"),o("rGqo"),window),U=T.W,Y=function(e,t){U.share.subscribe(function(e){t.votes=e||[]}),Promise.all([U.loadData(),U.share.getFromServer([])]).then(function(o){var n=X()(o,1),c=n[0],s=c.localdb,i=c.customize,l=i.question,a=i.choices;t.question=l,t.choices=a,void 0!==s&&(t.vote=s),e()})},D=function(e){U.setHooks({wappWillStart:function(t,o,n){var c=n.mode;"customize"===c?(e.customizeMode=!0,t()):Y(t,e)},onCustomizeValueChange:function(t){var o=t.key,n=t.value;"question"===o?e.question=n:"choices"===o&&(e.choices=n)}})},Z=window,I=Z.W,ee={name:"App",components:{Header:v,Vote:M,Button:E},data:function(){return{customizeMode:!1,question:"",choices:[],votes:[],vote:null,selectedChoice:null,showStatBeforeVoting:!1}},created:function(){var e=this;I&&D(this),ie.$on("choiceSelected",function(t){e.selectedChoice=t})},methods:{makeVote:function(e){if(null==e)return null;this.vote=e,F(e,this.choices.length),I.changeLocaldb(e)}}},te=ee,oe=o("49Fx");function ne(e){this["$style"]=oe["default"].locals||oe["default"]}var ce=Object(h["a"])(te,c,s,!1,ne,null,null),se=ce.exports;o.d(t,"bus",function(){return ie});var ie=new n["a"];n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(se)}}).$mount("#app")},ZCeB:function(e,t,o){e.exports={header:"Header_header_1rqvn","header-title":"Header_header-title_ggnxV"}},eMAj:function(e,t,o){e.exports={"button-container":"Button_button-container_L4UYR"}},iJW9:function(e,t,o){"use strict";var n=o("ExAY"),c=o.n(n);t["default"]=c.a},nMzj:function(e,t,o){e.exports={root:"App_root_2SJlR",customize:"App_customize_2cG2X"}},pxaK:function(e,t,o){},sPab:function(e,t,o){"use strict";var n=o("ZCeB"),c=o.n(n);t["default"]=c.a}});
//# sourceMappingURL=app.3bbff2ea.js.map